{% extends "admin_base.html" %}
{% load static %}

{% block title %}Update Lead{% endblock %}
{% block content %}

<style>

.lead-page {
    max-width: 850px;
    margin: 30px auto;
}

.lead-card {
    background: #ffffff;
    border-radius: 12px;
    padding: 26px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.08);
}


.lead-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 22px;
}
.lead-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: #111827;
}
.status-select {
    padding: 8px 14px;
    border-radius: 8px;
    border: 1px solid #d1d5db;
    font-weight: 600;
}


.section {
    margin-bottom: 24px;
}
.section-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #1f2937;
    margin-bottom: 14px;
}


.form-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px 20px;
}


.field {
    display: flex;
    flex-direction: column;
}
.field label {
    font-size: 0.8rem;
    color: #6b7280;
    margin-bottom: 6px;
}
.field input,
.field select,
.field textarea {
    border: 1px solid #d1d5db;
    border-radius: 8px;
    padding: 10px 12px;
    font-size: 0.95rem;
}
.field textarea {
    min-height: 90px;
    resize: vertical;
}


.full {
    grid-column: span 2;
}


.form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 14px;
    margin-top: 26px;
}
.btn-save {
    background: #2563eb;
    color: #ffffff;
    border: none;
    padding: 10px 26px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
}
.btn-back {
    background: #e5e7eb;
    color: #111827;
    border: none;
    padding: 10px 26px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
}
.btn-save:hover { background:#1d4ed8; }
.btn-back:hover { background:#d1d5db; }


@media (max-width: 768px) {
    .form-grid {
        grid-template-columns: 1fr;
    }
    .full {
        grid-column: span 1;
    }
    .lead-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }
}
</style>

<div class="lead-page">
<form method="post" class="lead-card">
{% csrf_token %}


<div class="lead-header">
    <div class="lead-title">
        Update Lead â€“ {{ lead.name }}
    </div>

    <select name="status" class="status-select">
        <option value="new" {% if lead.status == "new" %}selected{% endif %}>New</option>
        <option value="contacted" {% if lead.status == "contacted" %}selected{% endif %}>Contacted</option>
        <option value="intersted" {% if lead.status == "qualified" %}selected{% endif %}>Intersted</option>
        <option value="closed" {% if lead.status == "closed" %}selected{% endif %}>Closed</option>
    </select>
</div>

<!-- client requirements-->
<div class="section">
    <div class="section-title">Client Requirements</div>

    <div class="form-grid">
        <div class="field">
            <label>Property Type</label>
            <select name="property_type">
                <option value="">Select</option>
                <option value="plot" {% if lead.property_type == "plot" %}selected{% endif %}>Plot</option>
                <option value="flat" {% if lead.property_type == "flat" %}selected{% endif %}>Flat</option>
                <option value="villa" {% if lead.property_type == "villa" %}selected{% endif %}>Villa</option>
                <option value="commercial" {% if lead.property_type == "commercial" %}selected{% endif %}>Commercial</option>
            </select>
        </div>

        <div class="field">
            <label>Preferred Location</label>
            <input type="text" name="preferred_location" value="{{ lead.preferred_location }}">
        </div>

        <div class="field">
            <label>Budget Min</label>
            <input type="number" name="budget_min" value="{{ lead.budget_min }}">
        </div>

        <div class="field">
            <label>Budget Max</label>
            <input type="number" name="budget_max" value="{{ lead.budget_max }}">
        </div>
    </div>
</div>

<!-- call details -->
<div class="section">
    <div class="section-title">Call Details</div>

    <div class="form-grid">
        <div class="field">
            <label>Interest Level</label>
            <select name="interest_level">
                <option value="low" {% if lead.interest_level == "low" %}selected{% endif %}>Low</option>
                <option value="medium" {% if lead.interest_level == "medium" %}selected{% endif %}>Medium</option>
                <option value="high" {% if lead.interest_level == "high" %}selected{% endif %}>High</option>
            </select>
        </div>

        <div class="field">
            <label>Next Action</label>
            <input type="text" name="next_action" value="{{ lead.next_action }}">
        </div>

        <div class="field full">
            <label>Client Response</label>
            <textarea name="client_response">{{ lead.client_response }}</textarea>
        </div>

        <div class="field">
            <label>Next Follow-up</label>
            <input type="datetime-local"
                   name="follow_up_at"
                   value="{{ lead.follow_up_at|date:'Y-m-d\\TH:i' }}">
        </div>

        <div class="field full">
            <label>Agent / Associate Notes</label>
            <textarea name="agent_note">{{ lead.agent_note }}</textarea>
        </div>
    </div>
</div>

<!-- actions -->
<div class="form-actions">
    <button type="submit" class="btn-save">
        Save Details
    </button>
    <button type="button" class="btn-back" onclick="history.back()">
        Back
    </button>
</div>

</form>
</div>

{% endblock %}
