{% extends "admin_base.html" %}
{% load static %}

{% block content %}

<style>
/* Page Wrapper */
.lead-container {
    max-width: 1000px;
    margin: 30px auto;
}

/* Card */
.lead-card {
    background: #ffffff;
    border-radius: 14px;
    padding: 30px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.06);
    border: 1px solid #eef0f6;
}

/* Title */
.lead-title {
    font-size: 22px;
    font-weight: 600;
    margin-bottom: 25px;
    color: #2d3748;
}

/* Grid */
.form-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
}

/* Full width */
.full-width {
    grid-column: span 2;
}

/* Labels */
.lead-card label {
    font-size: 13px;
    font-weight: 600;
    color: #4a5568;
    margin-bottom: 6px;
    display: block;
}

/* Inputs */
.lead-card input,
.lead-card select,
.lead-card textarea {
    width: 100%;
    padding: 10px 12px;
    border-radius: 8px;
    border: 1px solid #dcdfe6;
    font-size: 14px;
    transition: 0.2s ease;
    background: #f9fafc;
}

.lead-card input:focus,
.lead-card select:focus,
.lead-card textarea:focus {
    border-color: #6366f1;
    outline: none;
    background: #fff;
    box-shadow: 0 0 0 2px rgba(99,102,241,0.15);
}

/* Textarea */
.lead-card textarea {
    resize: vertical;
    min-height: 80px;
}

/* Buttons */
.form-actions {
    margin-top: 25px;
    text-align: right;
}

.btn-save {
    background: linear-gradient(135deg,#3538f4,#423ade);
    color: #fff;
    padding: 10px 22px;
    border-radius: 8px;
    border: none;
    font-weight: 600;
    cursor: pointer;
    transition: 0.2s ease;
}

.btn-save:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(79,70,229,0.3);
}

.btn-cancel {
    background: #f1f5f9;
    border: 1px solid #d1d5db;
    padding: 10px 18px;
    border-radius: 8px;
    margin-right: 10px;
    text-decoration: none;
    color: #374151;
    font-weight: 500;
}
</style>

<div class="lead-container">
    <div class="lead-card">
        <div class="lead-title">
            {{ form.instance.pk|yesno:"Update Lead,Create Lead" }}
        </div>

<form method="post">
{% csrf_token %}

<div class="form-grid">

    <div>
        <label>Name *</label>
        <input type="text" name="name" required>
    </div>

    <div>
        <label>Phone *</label>
        <input type="text" name="phone" required>
    </div>

    <div>
        <label>Email</label>
        <input type="email" name="email">
    </div>

    <div>
        <label>Status</label>
        <select name="status">
            <option value="new">New</option>
            <option value="contacted">Contacted</option>
            <option value="interested">Interested</option>
            <option value="closed">Closed</option>
        </select>
    </div>

    <div class="full-width">
        <label>Message</label>
        <textarea name="message"></textarea>
    </div>

    <!-- Assignment -->
    <div>
        <label>Assigned Agent</label>
        <select name="assigned_agent">
            <option value="">Select Agent</option>
            {% for user in agents %}
                <option value="{{ user.id }}">{{ user.username }}</option>
            {% endfor %}
        </select>
    </div>


    <!-- Property -->
    <div>
        <label>Property Type</label>
        <select name="property_type">
            <option value="">Select</option>
            <option value="plot">Plot</option>
            <option value="flat">Flat</option>
            <option value="villa">Villa</option>
            <option value="commercial">Commercial</option>
        </select>
    </div>

    <div>
        <label>Preferred Location</label>
        <input type="text" name="preferred_location">
    </div>

    <div>
        <label>Budget Min</label>
        <input type="number" name="budget_min" step="0.01">
    </div>

    <div>
        <label>Budget Max</label>
        <input type="number" name="budget_max" step="0.01">
    </div>

    <div>
        <label>Purchase Timeline</label>
        <select name="purchase_timeline">
            <option value="">Select</option>
            <option value="immediate">Immediate</option>
            <option value="1-3">1–3 Months</option>
            <option value="3-6">3–6 Months</option>
            <option value="enquiry">Just Enquiry</option>
        </select>
    </div>

    <!-- Feedback -->
    <div>
        <label>Interest Level</label>
        <select name="interest_level">
            <option value="">Select</option>
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
        </select>
    </div>

    <div>
        <label>Next Action</label>
        <input type="text" name="next_action">
    </div>

    <div class="full-width">
        <label>Client Response</label>
        <textarea name="client_response"></textarea>
    </div>

    <div class="full-width">
        <label>Objections</label>
        <textarea name="objections"></textarea>
    </div>

    <div class="full-width">
        <label>Agent Note</label>
        <textarea name="agent_note"></textarea>
    </div>

    <div>
        <label>Follow Up At</label>
        <input type="datetime-local" name="follow_up_at">
    </div>

</div>

<div class="form-actions">
    <a href="{% url 'admin_leads' %}" class="btn-cancel">Cancel</a>
    <button type="submit" class="btn-save">Save Lead</button>
</div>

</form>

    </div>
</div>

{% endblock %}
